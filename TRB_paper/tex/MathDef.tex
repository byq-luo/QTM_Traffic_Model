%% Adds the command \xspace to be used in \newcommand and automatically decide
%% whenever to add a space after the command
\usepackage{xspace}


\newcommand{\Matrix}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\Vector}[1]{\ensuremath{\vec{#1}}}


\newcommand{\Net}{\ensuremath{\mathcal{N}}\xspace}
\newcommand{\Qset}{\ensuremath{\mathcal{Q}}\xspace}
\newcommand{\QPset}[1]{\ensuremath{\mathcal{Q}_{#1}^{\mathcal{P}}}}
\newcommand{\Lset}{\ensuremath{\mathcal{L}}\xspace}
\newcommand{\Pset}{\ensuremath{\mathcal{P}}\xspace}
\newcommand{\Fvec}{\ensuremath{\Vector{F}}}
\newcommand{\Prvec}{\ensuremath{\Vector{Pr}}}
\newcommand{\fvec}[1]{\ensuremath{\mathbf{f}_{#1}}}
\newcommand{\tl}{\ensuremath{\ell}\xspace}

% Uncomment for old style equations
%\newcommand*{\oldeq}{}

% Uncomment for new style equations with Lin and Wang subscripts
\newcommand*{\neweqsub}{}

% Uncomment for new in out flow variables
\newcommand*{\newinoutflow}{}

\ifdefined\oldeq
%
% Old style equations
%
\newcommand{\q}[2][n]{\ensuremath{q_{#2}^{#1}}}
\newcommand{\qin}[2][n]{\ensuremath{q_{#2,in}^{#1}}}
\newcommand{\qout}[2][n]{\ensuremath{q_{#2,out}^{#1}}}
\newcommand{\f}[3][n]{\ensuremath{f_{#2,#3}^{#1}}}
\newcommand{\inq}[2][n]{\ensuremath{in_{#2}^{#1}}}
\newcommand{\outq}[2][n]{\ensuremath{out_{#2}^{#1}}}
\newcommand{\p}[3][n]{\ensuremath{p_{#2,#3}^{#1}}}
\newcommand{\pd}[3][n]{\ensuremath{d_{#2,#3}^{#1}}}
\newcommand{\aph}[2][n]{\ensuremath{\alpha_{#2}^{#1}}}
\newcommand{\tn}[1][n]{\ensuremath{t^{#1}}}
\newcommand{\DT}[1][n]{\ensuremath{\Delta t^{#1}}}

\newcommand{\Nn}{\ensuremath{\mathrm{N}}\xspace}
\newcommand{\Qn}{\ensuremath{|\mathcal{\Qset}|}\xspace}
\newcommand{\Ln}{\ensuremath{|\mathcal{\Lset}|}\xspace}
\newcommand{\Pn}[1][\ell]{\ensuremath{|\mathcal{\Pset}_{#1}|}}
\newcommand{\TMAX}{\ensuremath{T^{MAX}}\xspace}
\newcommand{\QMAX}[1]{\ensuremath{Q_{#1}^{MAX}}}
\newcommand{\QIN}[1]{\ensuremath{Q_{#1}^{IN}}}
\newcommand{\QOUT}[1]{\ensuremath{Q_{#1}^{OUT}}}
\newcommand{\QDELAY}[1]{\ensuremath{Q_{#1}^{DELAY}}}
\newcommand{\FMAX}[2]{\ensuremath{F_{#1,#2}^{MAX}}}
\newcommand{\FTURN}[2]{\ensuremath{F_{#1,#2}^{TURN}}}
\newcommand{\PTMAX}[2]{\ensuremath{PT_{#1,#2}^{MAX}}}
\newcommand{\PTMIN}[2]{\ensuremath{PT_{#1,#2}^{MIN}}}
\newcommand{\CTMAX}[1]{\ensuremath{CT_{#1}^{MAX}}}
\newcommand{\CTMIN}[1]{\ensuremath{CT_{#1}^{MIN}}}

\else
\ifdefined\neweqsub
%
% New style equations subscript
%
\newcommand{\q}[2][n]{\ensuremath{q_{#2,#1}}}
\newcommand{\qin}[2][n]{\ensuremath{q_{#2,#1}^{\mathrm{in}}}}
\newcommand{\qout}[2][n]{\ensuremath{q_{#2,#1}^{\mathrm{out}}}}
\newcommand{\f}[3][n]{\ensuremath{f_{#2,#3,#1}}}

\ifdefined\newinoutflow
\newcommand{\inq}[2][n]{\ensuremath{f^\mathrm{in}_{#2,#1}}}
\newcommand{\outq}[2][n]{\ensuremath{f^\mathrm{out}_{#2,#1}}}
\else
\newcommand{\inq}[2][n]{\ensuremath{in_{#2,#1}}}
\newcommand{\outq}[2][n]{\ensuremath{out_{#2,#1}}}
\fi

\newcommand{\p}[3][n]{\ensuremath{p_{#2,#3,#1}}}
\newcommand{\pd}[3][n]{\ensuremath{d_{#2,#3,#1}}}
\newcommand{\aph}[2][n]{\ensuremath{\alpha_{#2,#1}}}
\newcommand{\tn}[1][n]{\ensuremath{t_{#1}}}
\newcommand{\DT}[1][n]{\ensuremath{\Delta t_{#1}}}
\newcommand{\vecDT}{\ensuremath{\Vector{\Delta t}}\xspace}

\newcommand{\Nn}{\ensuremath{\mathrm{N}}\xspace}
\newcommand{\Qn}{\ensuremath{|\mathcal{\Qset}|}\xspace}
\newcommand{\Ln}{\ensuremath{|\mathcal{\Lset}|}\xspace}
\newcommand{\Pn}[1][\ell]{\ensuremath{|\mathcal{\Pset}_{#1}|}}
\newcommand{\TMAX}{\ensuremath{\mathrm{T}}\xspace}
\newcommand{\QMAX}[1]{\ensuremath{\mathrm{Q}_{#1}}}

\ifdefined\newinoutflow
%\newcommand{\QIN}[1]{\ensuremath{\mathrm{F}_{in\shortrightarrow#1}}}
%\newcommand{\QOUT}[1]{\ensuremath{\mathrm{F}_{#1\shortrightarrow out}}}
%\newcommand{\QIN}[1]{\ensuremath{\mathrm{F}_{#1}^{\mathrm{in}}}}
\newcommand{\MatQIN}{\ensuremath{\Matrix{I}}\xspace}
\newcommand{\QIN}[2]{\ensuremath{I_{#1,#2}}}
\newcommand{\QOUT}[1]{\ensuremath{\mathrm{F}_{#1}^{\mathrm{out}}}}
\else
\newcommand{\QIN}[1]{\ensuremath{\mathrm{Q}_{#1}^{\mathrm{in}}}}
\newcommand{\QOUT}[1]{\ensuremath{\mathrm{Q}_{#1}^{\mathrm{out}}}}
\fi

\newcommand{\QDELAY}[1]{\ensuremath{\mathrm{T}_{#1}^{\mathrm{prop}}}}
\newcommand{\FMAX}[2]{\ensuremath{\mathrm{F}_{#1,#2}}}
\newcommand{\FTURN}[2]{\ensuremath{\mathrm{Pr}_{#1,#2}}}
\newcommand{\PTMAX}[3][,]{\ensuremath{\mathrm{\Phi}_{#2#1#3}^{\mathrm{max}}}}
\newcommand{\PTMIN}[3][,]{\ensuremath{\mathrm{\Phi}_{#2#1#3}^{\mathrm{min}}}}
\newcommand{\VecPTMAX}[1]{\ensuremath{\Vector{\mathrm{\Phi}}_{#1}^{\mathrm{max}}}}
\newcommand{\VecPTMIN}[1]{\ensuremath{\Vector{\mathrm{\Phi}}_{#1}^{\mathrm{min}}}}
\newcommand{\CTMAX}[1]{\ensuremath{\mathrm{\Psi}_{#1}^{\mathrm{max}}}}
\newcommand{\CTMIN}[1]{\ensuremath{\mathrm{\Psi}_{#1}^{\mathrm{min}}}}



\else
%
% New style equations superscript
%
\newcommand{\q}[2][n]{\ensuremath{q_{#2}^{(#1)}}}
\newcommand{\qin}[2][n]{\ensuremath{q_{#2,in}^{(#1)}}}
\newcommand{\qout}[2][n]{\ensuremath{q_{#2,out}^{(#1)}}}
\newcommand{\f}[3][n]{\ensuremath{f_{#2\to#3}^{(#1)}}}
\newcommand{\inq}[2][n]{\ensuremath{in_{#2}^{(#1)}}}
\newcommand{\outq}[2][n]{\ensuremath{out_{#2}^{(#1)}}}
\newcommand{\p}[3][n]{\ensuremath{p_{#2,#3}^{(#1)}}}
\newcommand{\pd}[3][n]{\ensuremath{d_{#2,#3}^{(#1)}}}
\newcommand{\aph}[2][n]{\ensuremath{\alpha_{#2}^{(#1)}}}
\newcommand{\tn}[1][n]{\ensuremath{t^{(#1)}}}
\newcommand{\DT}[1][n]{\ensuremath{\Delta t^{(#1)}}}

\newcommand{\Nn}{\ensuremath{\mathrm{N}}\xspace}
\newcommand{\Qn}{\ensuremath{|\mathcal{\Qset}|}\xspace}
\newcommand{\Ln}{\ensuremath{|\mathcal{\Let}|}\xspace}
\newcommand{\Pn}[1][\ell]{\ensuremath{|\mathcal{\Pet}_{#1}|}}
\newcommand{\TMAX}{\ensuremath{\mathrm{T}}\xspace}
\newcommand{\QMAX}[1]{\ensuremath{\mathrm{Q}_{#1}}}
\newcommand{\QIN}[1]{\ensuremath{\mathrm{Q}_{#1}^{\mathrm{in}}}}
\newcommand{\QOUT}[1]{\ensuremath{\mathrm{Q}_{#1}^{\mathrm{out}}}}
\newcommand{\QDELAY}[1]{\ensuremath{\mathrm{Q}_{#1}^{\mathrm{delay}}}}
\newcommand{\FMAX}[2]{\ensuremath{\mathrm{F}_{#1\to#2}}}
\newcommand{\FTURN}[2]{\ensuremath{\mathrm{Pr}_{#1\to#2}^{\mathrm{}}}}
\newcommand{\PTMAX}[3][,]{\ensuremath{\mathrm{\Phi}_{#2#1#3}^{\mathrm{max}}}}
\newcommand{\PTMIN}[3][,]{\ensuremath{\mathrm{\Phi}_{#2#1#3}^{\mathrm{min}}}}
\newcommand{\CTMAX}[1]{\ensuremath{\mathrm{\Psi}_{#1}^{\mathrm{max}}}}
\newcommand{\CTMIN}[1]{\ensuremath{\mathrm{\Psi}_{#1}^{\mathrm{min}}}}

\fi
